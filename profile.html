<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Card</title>

    <!-- Fontfaces CSS-->
    <link href="css/font-face.css" rel="stylesheet" media="all">
    <link href="vendor/fontawesome-7.0.1/css/all.min.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="vendor/bootstrap-5.3.8.min.css" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="css/aos.css" rel="stylesheet" media="all">
    <link href="vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" media="all">
    <link href="css/swiper-bundle-11.2.10.min.css" rel="stylesheet" media="all">
    <link href="vendor/perfect-scrollbar/perfect-scrollbar-1.5.6.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/theme.css" rel="stylesheet" media="all">
    <style>
        /* ======== DARK MODE ======== */
        body.dark-mode {
            background-color: #ffffff !important;
            color: #fffefe !important;
        }

        body.dark-mode .card,
        body.dark-mode .header-desktop {
            background-color: #6d6a6a !important;
            color: #ffffff !important;
        }

        body.dark-mode .main-content {
            background-color: #8f8989 !important;
            color: #ffffff !important;
        }

        body.dark-mode a {
            color: #000000 !important;
        }

        body.dark-mode .account-dropdown {
            background-color: #6d6a6a !important;
        }

        body.dark-mode .account-dropdown__item a {
            color: #ffffff !important;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 90px;
            height: 32px;
        }

        .switch-input {
            display: none;
        }

        .switch-label {
            display: block;
            cursor: pointer;
            border: 2px solid #ccc;
            border-radius: 50px;
            background-color: #f5f5f5;
            text-align: center;
            font-size: 14px;
            line-height: 28px;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
            box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.1);
        }

        .navbar__list li a.active {
            background-color: #e8f0fe;
            /* warna terang seperti highlight */
            color: #1a73e8 !important;
            /* biru agar selaras */
            border-radius: 8px;
            font-weight: 600;
        }

        /* Mode gelap */
        body.dark-mode .navbar__list li a.active {
            background-color: #6d6a6a;
            color: #0a0a0a !important;
            border-radius: 8px;
        }

        /* Perbaiki agar active juga muncul di menu mobile */
        .navbar-mobile__list li a.active {
            background-color: #e8f0fe !important;
            color: #1a73e8 !important;
            border-radius: 8px !important;
            font-weight: 600;
        }

        /* Versi dark mode */
        body.dark-mode .navbar-mobile__list li a.active {
            background-color: #6d6a6a !important;
            color: #0a0a0a !important;
        }
    </style>

</head>

<body>
    <div class="page-wrapper">
        <!-- HEADER MOBILE-->
        <header class="header-mobile d-block d-lg-none">
            <div class="header-mobile__bar">
                <div class="container-fluid">
                    <div class="header-mobile-inner">
                        <a class="logo" href="index.html">
                            <img src="images/icon/logo.png" alt="CoolAdmin" />
                        </a>
                        <button class="hamburger hamburger--slider" type="button">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            <nav class="navbar-mobile">
                <div class="container-fluid">
                    <ul class="navbar-mobile__list list-unstyled">
                        <!-- <li class="has-sub">
                            <a class="js-arrow" href="#">
                                <i class="fas fa-tachometer-alt"></i>Dashboard</a>
                            <ul class="navbar-mobile-sub__list list-unstyled js-sub-list">
                                <li>
                                    <a href="index.html">Dashboard 1</a>
                                </li>
                                <li>
                                    <a href="index2.html">Dashboard 2</a>
                                </li>
                                <li>
                                    <a href="index3.html">Dashboard 3</a>
                                </li>
                                <li>
                                    <a href="index4.html">Dashboard 4</a>
                                </li>
                            </ul>
                        </li> -->
                        <li>
                            <a href="index.html">
                                <i class="fas fa-tachometer-alt "></i>Dashboard</a>
                        </li>
                        <!-- <li>
                            <a href="chart.html">
                                <i class="fas fa-chart-bar"></i>Charts</a>
                        </li> -->
                        <li>
                            <a href="table.html">
                                <i class="fas fa-table"></i>Tables</a>
                        </li>
                        <li>
                            <a href="form.html">
                                <i class="far fa-check-square"></i>Forms</a>
                        </li>
                        <li>
                            <a href="calendar.html">
                                <i class="fas fa-calendar-alt"></i>Calendar</a>
                        </li>
                        <li>
                            <a href="map.html">
                                <i class="fas fa-map-marker-alt"></i>Maps</a>
                        </li>
                        <li class="has-sub">
                            <a class="js-arrow" href="#">
                                <i class="fas fa-desktop"></i>Account</a>
                            <ul class="navbar-mobile-sub__list list-unstyled js-sub-list">

                                <li id="menuAccountMobile">
                                    <a href="register.html">
                                        <i class="fas fa-user"></i> Register
                                    </a>
                                </li>
                                <!-- <li id="menuAccountMobile1">
                                    <a href="forget-pass.html">
                                        <i class="fas fa-unlock-alt"></i> Forget Password
                                    </a>
                                </li> -->
                                <li id="menuAccountMobile2">
                                    <a href="users.html">
                                        <i class="fas fa-user-edit"></i> Users
                                    </a>
                                </li>
                                <li>
                                    <a href="profile.html" class="active">
                                        <i class="far fa-id-card"></i> Profil Akun
                                    </a>
                                </li>
                                <li>
                                    <a href="login.html">
                                        <i class="fas fa-sign-in-alt"></i> Logout
                                    </a>
                                </li>
                            </ul>

                        </li>
                        <!-- <li class="has-sub">
                            <a class="js-arrow" href="#">
                                <i class="fas fa-desktop"></i>UI Elements</a>
                            <ul class="navbar-mobile-sub__list list-unstyled js-sub-list">
                                <li>
                                    <a href="button.html">Button</a>
                                </li>
                                <li>
                                    <a href="badge.html">Badges</a>
                                </li>
                                <li>
                                    <a href="tab.html">Tabs</a>
                                </li>
                                <li>
                                    <a href="card.html">Cards</a>
                                </li>
                                <li>
                                    <a href="alert.html">Alerts</a>
                                </li>
                                <li>
                                    <a href="progress-bar.html">Progress Bars</a>
                                </li>
                                <li>
                                    <a href="modal.html">Modals</a>
                                </li>
                                <li>
                                    <a href="switch.html">Switchs</a>
                                </li>
                                <li>
                                    <a href="grid.html">Grids</a>
                                </li>
                                <li>
                                    <a href="fontawesome.html">Fontawesome Icon</a>
                                </li>
                                <li>
                                    <a href="typo.html">Typography</a>
                                </li>
                            </ul>
                        </li> -->
                    </ul>
                </div>
            </nav>
        </header>
        <!-- END HEADER MOBILE-->

        <!-- MENU SIDEBAR-->
        <aside class="menu-sidebar d-none d-lg-block">
            <div class="logo">
                <a href="#">
                    <img src="images/icon/logo.png" alt="Cool Admin" />
                </a>
            </div>
            <div class="menu-sidebar__content js-scrollbar1">
                <nav class="navbar-sidebar">
                    <ul class="list-unstyled navbar__list">
                        <!-- <li class="active has-sub">
                            <a class="js-arrow" href="#">
                                <i href="index.html" class="fas fa-tachometer-alt"></i>Dashboard</a>
                            <ul class="list-unstyled navbar__sub-list js-sub-list">
                                <li>
                                    <a href="index.html">Dashboard 1</a>
                                </li>
                                <li>
                                    <a href="index2.html">Dashboard 2</a>
                                </li>
                                <li>
                                    <a href="index3.html">Dashboard 3</a>
                                </li>
                                <li>
                                    <a href="index4.html">Dashboard 4</a>
                                </li>
                            </ul>
                        </li> -->
                        <li>
                            <a href="index.html">
                                <i class="fas fa-tachometer-alt"></i>Dashboard</a>
                        </li>
                        <!-- <li>
                            <a href="chart.html">
                                <i class="fas fa-chart-bar"></i>Charts</a>
                        </li> -->
                        <li>
                            <a href="table.html">
                                <i class="fas fa-table"></i>Tables</a>
                        </li>
                        <li>
                            <a href="form.html">
                                <i class="far fa-check-square"></i>Forms</a>
                        </li>
                        <li>
                            <a href="calendar.html">
                                <i class="fas fa-calendar-alt"></i>Calendar</a>
                        </li>
                        <li>
                            <a href="map.html">
                                <i class="fas fa-map-marker-alt"></i>Maps</a>
                        </li>
                        <li class="has-sub">
                            <a class="js-arrow" href="#">
                                <i class="fas fa-desktop"></i>Account</a>
                            <ul class="list-unstyled navbar__sub-list js-sub-list">

                                <li id="menuAccountDesktop">
                                    <a href="register.html">
                                        <i class="fas fa-user"></i> Register
                                    </a>
                                </li>
                                <!-- <li id="menuAccountDesktop1">
                                    <a href="forget-pass.html">
                                        <i class="fas fa-unlock-alt"></i> Forget Password
                                    </a>
                                </li> -->
                                <li id="menuAccountDesktop2">
                                    <a href="users.html">
                                        <i class="fas fa-user-edit"></i> Users
                                    </a>
                                </li>
                                <li>
                                    <a href="profile.html" class="active">
                                        <i class="far fa-id-card"></i> Profil Akun
                                    </a>
                                </li>
                                <li>
                                    <a href="login.html">
                                        <i class="fas fa-sign-in-alt"></i> Logout
                                    </a>
                                </li>
                            </ul>

                        </li>
                        <!-- <li class="has-sub">
                            <a class="js-arrow" href="#">
                                <i class="fas fa-desktop"></i>UI Elements</a>
                            <ul class="list-unstyled navbar__sub-list js-sub-list">
                                <li>
                                    <a href="button.html">Button</a>
                                </li>
                                <li>
                                    <a href="badge.html">Badges</a>
                                </li>
                                <li>
                                    <a href="tab.html">Tabs</a>
                                </li>
                                <li>
                                    <a href="card.html">Cards</a>
                                </li>
                                <li>
                                    <a href="alert.html">Alerts</a>
                                </li>
                                <li>
                                    <a href="progress-bar.html">Progress Bars</a>
                                </li>
                                <li>
                                    <a href="modal.html">Modals</a>
                                </li>
                                <li>
                                    <a href="switch.html">Switchs</a>
                                </li>
                                <li>
                                    <a href="grid.html">Grids</a>
                                </li>
                                <li>
                                    <a href="fontawesome.html">Fontawesome Icon</a>
                                </li>
                                <li>
                                    <a href="typo.html">Typography</a>
                                </li>
                            </ul>
                        </li> -->
                    </ul>
                </nav>
            </div>
        </aside>
        <!-- END MENU SIDEBAR-->

        <!-- PAGE CONTAINER-->
        <div class="page-container">
            <!-- HEADER DESKTOP-->
            <header class="header-desktop">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="header-wrap">
                            <form class="form-header" action="" method="POST">

                            </form>
                            <div class="header-button">
                                <div class="noti-wrap">
                                    <div class="noti__item js-item-menu">
                                        <i class="zmdi zmdi-comment-more"></i>
                                        <span class="quantity">1</span>
                                        <div class="mess-dropdown js-dropdown">
                                            <div class="mess__title">
                                                <p>You have 2 news message</p>
                                            </div>
                                            <div class="mess__item">
                                                <div class="image img-cir img-40">
                                                    <img src="images/icon/avatar-06.jpg" alt="Michelle Moreno" />
                                                </div>
                                                <div class="content">
                                                    <h6>Michelle Moreno</h6>
                                                    <p>Have sent a photo</p>
                                                    <span class="time">3 min ago</span>
                                                </div>
                                            </div>
                                            <div class="mess__item">
                                                <div class="image img-cir img-40">
                                                    <img src="images/icon/avatar-04.jpg" alt="Diane Myers" />
                                                </div>
                                                <div class="content">
                                                    <h6>Diane Myers</h6>
                                                    <p>You are now connected on message</p>
                                                    <span class="time">Yesterday</span>
                                                </div>
                                            </div>
                                            <div class="mess__footer">
                                                <a href="#">View all messages</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="noti__item js-item-menu">
                                        <i class="zmdi zmdi-email"></i>
                                        <span class="quantity">1</span>
                                        <div class="email-dropdown js-dropdown">
                                            <div class="email__title">
                                                <p>You have 3 New Emails</p>
                                            </div>
                                            <div class="email__item">
                                                <div class="image img-cir img-40">
                                                    <img src="images/icon/avatar-06.jpg" alt="Cynthia Harvey" />
                                                </div>
                                                <div class="content">
                                                    <p>Meeting about new dashboard...</p>
                                                    <span>Cynthia Harvey, 3 min ago</span>
                                                </div>
                                            </div>
                                            <div class="email__item">
                                                <div class="image img-cir img-40">
                                                    <img src="images/icon/avatar-05.jpg" alt="Cynthia Harvey" />
                                                </div>
                                                <div class="content">
                                                    <p>Meeting about new dashboard...</p>
                                                    <span>Cynthia Harvey, Yesterday</span>
                                                </div>
                                            </div>
                                            <div class="email__item">
                                                <div class="image img-cir img-40">
                                                    <img src="images/icon/avatar-04.jpg" alt="Cynthia Harvey" />
                                                </div>
                                                <div class="content">
                                                    <p>Meeting about new dashboard...</p>
                                                    <span>Cynthia Harvey, January 15, 2025</span>
                                                </div>
                                            </div>
                                            <div class="email__footer">
                                                <a href="#">See all emails</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="noti__item js-item-menu">
                                        <i class="zmdi zmdi-notifications"></i>
                                        <span class="quantity">3</span>
                                        <div class="notifi-dropdown js-dropdown">
                                            <div class="notifi__title">
                                                <p>You have 3 Notifications</p>
                                            </div>
                                            <div class="notifi__item">
                                                <div class="bg-c1 img-cir img-40">
                                                    <i class="zmdi zmdi-email-open"></i>
                                                </div>
                                                <div class="content">
                                                    <p>You got a email notification</p>
                                                    <span class="date">January 15, 2025 14:30</span>
                                                </div>
                                            </div>
                                            <div class="notifi__item">
                                                <div class="bg-c2 img-cir img-40">
                                                    <i class="zmdi zmdi-account-box"></i>
                                                </div>
                                                <div class="content">
                                                    <p>Your account has been blocked</p>
                                                    <span class="date">January 15, 2025 14:30</span>
                                                </div>
                                            </div>
                                            <div class="notifi__item">
                                                <div class="bg-c3 img-cir img-40">
                                                    <i class="zmdi zmdi-file-text"></i>
                                                </div>
                                                <div class="content">
                                                    <p>You got a new file</p>
                                                    <span class="date">January 15, 2025 14:30</span>
                                                </div>
                                            </div>
                                            <div class="notifi__footer">
                                                <a href="#">All notifications</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="account-wrap">
                                    <div class="account-item clearfix js-item-menu">
                                        <div class="image">
                                            <img id="userAvatar" src="images/icon/avatar-01.jpg" alt="User Avatar" />
                                        </div>
                                        <div class="content">
                                            <a class="js-acc-btn" id="userName" href="#">User</a>
                                        </div>
                                        <div class="account-dropdown js-dropdown">
                                            <div class="info clearfix">
                                                <div class="image">
                                                    <a href="#">
                                                        <img id="dropdownAvatar" src="images/icon/avatar-01.jpg"
                                                            alt="User Avatar" />
                                                    </a>
                                                </div>
                                                <div class="content" style="height: 5px; margin-top: -11px;">
                                                    <h5 class="name">
                                                        <a href="#" id="dropdownName">User</a>
                                                    </h5>
                                                    <span class="email" id="dropdownEmail">user@example.com</span><br>
                                                    <small id="dropdownCabang" style="color:#777;">Cabang: -</small>
                                                </div>
                                            </div>
                                            <div class="account-dropdown__body">
                                                <div class="account-dropdown__item">
                                                    <a href="profile.html"><i class="zmdi zmdi-account"></i>Account</a>
                                                </div>
                                                <!-- <div class="account-dropdown__item">
                                                    <a href="#"><i class="zmdi zmdi-settings"></i>Setting</a>
                                                </div> -->
                                                <div class="account-dropdown__item">
                                                    <a href="#">
                                                        <i class="zmdi zmdi-settings"></i>Tema

                                                        <!-- <span id="themeLabel">Terang</span> -->
                                                        <label class="switch switch-text switch-secondary switch-pill"
                                                            style="margin-left: 5px; width: 100px;">
                                                            <input id="themeToggle" type="checkbox"
                                                                class="switch-input">
                                                            <span data-on="Gelap" data-off="Terang"
                                                                class="switch-label"></span>
                                                            <span class="switch-handle"></span>
                                                        </label>
                                                    </a>
                                                </div>



                                                <!-- <div class="account-dropdown__item">
                                                    <a href="#"><i class="zmdi zmdi-money-box"></i>Billing</a>
                                                </div> -->
                                            </div>
                                            <div class="account-dropdown__footer"
                                                style="background-color: #db3232; margin-top: -18px;">
                                                <a href="#" id="logoutBtn">
                                                    <i class="zmdi zmdi-power"></i>Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- HEADER DESKTOP-->

            <!-- MAIN CONTENT-->
            <div class="main-content">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="row justify-content-center">
                            <div class="col-md-6">
                                <div class="card text-center">
                                    <div class="card-header text-center">
                                        <i class="fas fa-user"></i> <strong>Profil Akun</strong>
                                    </div>
                                    <div class="card-body" id="profileView">
                                        <img id="profileAvatar" src="images/icon/avatar-01.jpg"
                                            class="rounded-circle mx-auto d-block" width="100">
                                        <h5 id="profileName" class="text-center mt-2 mb-1">-</h5>

                                        <div id="profileNik" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-id-card"></i> NIK : -
                                        </div>
                                        <div id="profileUsername" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-user"></i>
                                            Username : -</div>
                                        <div id="profileEmail" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-envelope"></i>
                                            Email : -</div>
                                        <div id="profilePassword" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-key"></i>
                                            Password : ********</div>
                                        <div id="profileRole" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-briefcase"></i>
                                            Cabang/Role : -</div>
                                        <div id="profileSales" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-briefcase"></i>
                                            Email Sales : -</div>
                                            <div id="profileADH" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-briefcase"></i>
                                            Email ADH : -</div>
                                            <div id="profilePenjual" style="text-align: left; margin-bottom: 5px;"><i
                                                class="fas fa-briefcase"></i>
                                            Email Penjual : -</div>
                                        <hr>
                                        <button id="editBtn" class="btn btn-primary btn-sm">Edit Profil</button>
                                    </div>

                                    <div class="card-body" id="editForm"
                                        style="display:none; text-align:left; max-width:400px; margin:0 auto;">
                                        <div class="form-group mb-2">
                                            <label style="font-weight:600; display:block; margin-bottom:4px;">Nama
                                                Lengkap</label>
                                            <input type="text" id="editNama" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">NIK</label>
                                            <input type="text" id="editNik" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Username</label>
                                            <input type="text" id="editUsername" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Email</label>
                                            <input type="email" id="editEmail" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label style="font-weight:600; display:block; margin-bottom:4px;">Password
                                                (kosongkan jika tidak ingin diubah)</label>
                                            <input type="password" id="editPassword" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Cabang/Role
                                                (tidak bisa diubah)</label>
                                            <input type="text" id="editRole" class="form-control" disabled>
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Email Sales</label>
                                            <input type="email" id="editEmailSales" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Email ADH</label>
                                            <input type="email" id="editEmailADH" class="form-control">
                                        </div>
                                        <div class="form-group mb-2">
                                            <label
                                                style="font-weight:600; display:block; margin-bottom:4px;">Email Penjual</label>
                                            <input type="email" id="editEmailPenjual" class="form-control">
                                        </div>
                                        <div class="text-center mt-2">
                                            <button id="saveBtn" class="btn btn-success btn-sm">Simpan</button>
                                            <button id="cancelBtn" class="btn btn-secondary btn-sm">Kembali</button>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE CONTAINER-->

    </div>

    <!-- Vanilla Utils JS-->
    <script src="js/vanilla-utils.js"></script>
    <!-- Bootstrap JS-->
    <script src="vendor/bootstrap-5.3.8.bundle.min.js"></script>
    <!-- Vendor JS       -->
    <script src="vendor/perfect-scrollbar/perfect-scrollbar-1.5.6.min.js"></script>
    <script src="vendor/chartjs/chart.umd.js-4.5.0.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const user = JSON.parse(localStorage.getItem("user"));
            if (!user) {
                window.location.href = "login.html";
                return;
            }
            /* ðŸ”’ SEMBUNYIKAN MENU ACCOUNT JIKA BUKAN ADMIN */
            if ((user.role || "").toLowerCase() !== "admin") {
                const accMobile = document.getElementById("menuAccountMobile");
                const accMobile1 = document.getElementById("menuAccountMobile1");
                const accMobile2 = document.getElementById("menuAccountMobile2");
                const accDesktop = document.getElementById("menuAccountDesktop");
                const accDesktop1 = document.getElementById("menuAccountDesktop1");
                const accDesktop2 = document.getElementById("menuAccountDesktop2");
                    // form edit hilang

                if (accMobile) accMobile.style.display = "none";
                if (accMobile1) accMobile1.style.display = "none";
                if (accMobile2) accMobile2.style.display = "none";
                if (accDesktop) accDesktop.style.display = "none";
                if (accDesktop1) accDesktop1.style.display = "none";
                if (accDesktop2) accDesktop2.style.display = "none";
            }

            if (user) {
                // Tampilkan data sesuai user yang login
                document.getElementById("userName").textContent = user.namaLengkap || "User";
                document.getElementById("dropdownName").textContent = user.namaLengkap || "User";
                document.getElementById("dropdownEmail").textContent = user.email || "-";
                document.getElementById("dropdownCabang").textContent = user.role ? "" + user.role : "-";

                // Kalau user punya foto profil, tampilkan (opsional)
                if (user.avatarUrl) {
                    document.getElementById("userAvatar").src = user.avatarUrl;
                    document.getElementById("dropdownAvatar").src = user.avatarUrl;
                }
            } else {
                // Kalau belum login, arahkan ke login page
                window.location.href = "login.html";
            }

            // Tombol logout
            document.getElementById("logoutBtn").addEventListener("click", function (e) {
                e.preventDefault();
                localStorage.removeItem("user");
                window.location.href = "login.html";
            });
            const editBtn = document.getElementById("editBtn");

        
        });
    </script>

    <script>
document.addEventListener("DOMContentLoaded", function () {

    const user = JSON.parse(localStorage.getItem("user"));
    const scriptURL = "https://script.google.com/macros/s/AKfycbwyutAXOuSEfy1yItsWsWNCPBzOqyI-lktXPUdizX3H05Bj-syHkbrUIIbWWPGvXDBI8Q/exec";

    const viewDiv = document.getElementById("profileView");
    const editDiv = document.getElementById("editForm");
    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");

    if (!user) {
        window.location.href = "login.html";
        return;
    }

    // ===========================
    // ðŸ”¹ SEMBUNYIKAN MENU ADMIN 
    // ===========================
    if ((user.role || "").toLowerCase() !== "admin") {
        const accIds = [
            "menuAccountMobile", "menuAccountMobile1", "menuAccountMobile2",
            "menuAccountDesktop", "menuAccountDesktop1", "menuAccountDesktop2"
        ];
        accIds.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.style.display = "none";
        });
    }

    // ===========================
    // ðŸ”¹ LOAD PROFIL
    // ===========================
    function loadProfile() {
        document.getElementById("profileName").textContent = user.namaLengkap || "-";
        document.getElementById("profileNik").innerHTML = `<i class="fas fa-id-card"></i> NIK : ${user.nik || "-"}`;
        document.getElementById("profileUsername").innerHTML = `<i class="fas fa-user"></i> Username : ${user.username || "-"}`;
        document.getElementById("profileEmail").innerHTML = `<i class="fas fa-envelope"></i> Email : ${user.email || "-"}`;
        document.getElementById("profilePassword").innerHTML = `<i class="fas fa-key"></i> Password : ********`;
        document.getElementById("profileRole").innerHTML = `<i class="fas fa-house"></i> Cabang : ${user.role || "-"}`;
        document.getElementById("profileSales").innerHTML = `<i class="fas fa-user-tie"></i> Email Sales : ${user.emailSales || "-"}`;
        document.getElementById("profileADH").innerHTML = `<i class="fas fa-building"></i> Email ADH : ${user.emailADH || "-"}`;
        document.getElementById("profilePenjual").innerHTML = `<i class="fas fa-store"></i> Email Penjual : ${user.emailPenjual || "-"}`;

        if (user.avatarUrl) {
            document.getElementById("profileAvatar").src = user.avatarUrl;
        }
    }

    loadProfile();

    // ===========================
    // ðŸ”¹ KLIK EDIT PROFIL
    // ===========================
    editBtn.addEventListener("click", () => {

        // â— Jika bukan admin â†’ pesan
        if ((user.role || "").toLowerCase() !== "admin") {
            showMessage("âŒ Anda tidak dapat mengedit profil. Silahkan hubungi Admin!", "error");
            return;
        }

        viewDiv.style.display = "none";
        editDiv.style.display = "block";

        document.getElementById("editNama").value = user.namaLengkap || "";
        document.getElementById("editNik").value = user.nik || "";
        document.getElementById("editUsername").value = user.username || "";
        document.getElementById("editEmail").value = user.email || "";
        document.getElementById("editPassword").value = "";
        document.getElementById("editRole").value = user.role || "";
        document.getElementById("editEmailSales").value = user.emailSales || "";
        document.getElementById("editEmailADH").value = user.emailADH || "";
        document.getElementById("editEmailPenjual").value = user.emailPenjual || "";
    });

    // ===========================
    // ðŸ”¹ TOMBOL KEMBALI
    // ===========================
    document.getElementById("cancelBtn").addEventListener("click", () => {
        editDiv.style.display = "none";
        viewDiv.style.display = "block";
    });

    // ===========================
    // ðŸ”¹ SIMPAN EDIT
    // ===========================
    saveBtn.addEventListener("click", async () => {

        const updatedUser = {
        action: "updateProfile",
        oldEmail: user.email,
        email: document.getElementById("editEmail").value.trim(),

        namaLengkap: document.getElementById("editNama").value.trim(),
        nik: document.getElementById("editNik").value.trim(),
        username: document.getElementById("editUsername").value.trim(),
        password: document.getElementById("editPassword").value.trim(),
        role: document.getElementById("editRole").value.trim(),

        // INI YANG BENAR!
        emailSales: document.getElementById("editEmailSales").value.trim(),
        emailADH: document.getElementById("editEmailADH").value.trim(),
        emailPenjual: document.getElementById("editEmailPenjual").value.trim()
        };

        saveBtn.disabled = true;
        saveBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Menyimpan...`;

        try {
            const response = await fetch(scriptURL, {
                method: "POST",
                body: new URLSearchParams(updatedUser)
            });

            const result = await response.json();
            showMessage(result.message, result.success ? "success" : "error");

            if (result.success) {
                const newUser = {
                    ...user,
                    namaLengkap: updatedUser.namaLengkap,
    nik: updatedUser.nik,
    username: updatedUser.username,
    email: updatedUser.email,
    role: updatedUser.role,

    emailSales: updatedUser.emailSales,
    emailADH: updatedUser.emailADH,
    emailPenjual: updatedUser.emailPenjual
                    
                };
                if (updatedUser.password !== "") newUser.password = updatedUser.password;

                localStorage.setItem("user", JSON.stringify(newUser));
                Object.assign(user, newUser);

                loadProfile();
                editDiv.style.display = "none";
                viewDiv.style.display = "block";
            }

        } catch (err) {
            showMessage("âŒ Gagal terhubung ke server!", "error");
        }

        saveBtn.disabled = false;
        saveBtn.innerHTML = "Simpan";
    });

    // ===========================
    // ðŸ”¹ LOGOUT
    // ===========================
    document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.removeItem("user");
        window.location.href = "login.html";
    });

});


// ===========================
// ðŸ”¹ TOAST MESSAGE
// ===========================
function showMessage(msg, type="info") {
    const colors = {
        success: "#4CAF50",
        error: "#f44336",
        warning: "#ff9800",
        info: "#2196F3"
    };

    const div = document.createElement("div");
    div.textContent = msg;
    div.style.position = "fixed";
    div.style.bottom = "20px";
    div.style.right = "20px";
    div.style.background = colors[type];
    div.style.color = "white";
    div.style.padding = "10px 15px";
    div.style.borderRadius = "8px";
    div.style.boxShadow = "0 3px 8px rgba(0,0,0,0.3)";
    div.style.zIndex = "9999";
    div.style.transition = "opacity 0.3s ease";

    document.body.appendChild(div);
    setTimeout(() => { div.style.opacity = "0"; setTimeout(() => div.remove(), 300); }, 2000);
}
</script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const themeToggle = document.getElementById("themeToggle");

            // Ambil tema dari localStorage
            const currentTheme = localStorage.getItem("theme") || "light";

            // Set awal tema
            if (currentTheme === "dark") {
                document.body.classList.add("dark-mode");
                themeToggle.checked = true;
            } else {
                document.body.classList.remove("dark-mode");
                themeToggle.checked = false;
            }

            // Event ketika switch diubah
            themeToggle.addEventListener("change", function () {
                if (themeToggle.checked) {
                    document.body.classList.add("dark-mode");
                    localStorage.setItem("theme", "dark");
                } else {
                    document.body.classList.remove("dark-mode");
                    localStorage.setItem("theme", "light");
                }
            });
        });
    </script>



    <!-- Main JS-->
    <script src="js/bootstrap5-init.js"></script>
    <script src="js/swiper-bundle-11.2.10.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/modern-plugins.js"></script> <!-- Main JS-->
    <script src="js/main-vanilla.js"></script>

</body>

</html>
<!-- end document-->