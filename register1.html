<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Register</title>

    <!-- Fontfaces CSS-->
    <link href="css/font-face.css" rel="stylesheet" media="all">
    <link href="vendor/fontawesome-7.0.1/css/all.min.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="vendor/bootstrap-5.3.8.min.css" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="css/aos.css" rel="stylesheet" media="all">
    <link href="vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" media="all">
    <link href="css/swiper-bundle-11.2.10.min.css" rel="stylesheet" media="all">
    <link href="vendor/perfect-scrollbar/perfect-scrollbar-1.5.6.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/theme.css" rel="stylesheet" media="all">
    <style>
        /* Background lembut */
        body,
        html {
            height: 100%;
            margin: 0;
            background: linear-gradient(135deg, #f0f4ff, #ffffff);
            font-family: "Poppins", sans-serif;
        }

        /* Wrapper */
        .page-wrapper,
        .page-content--bge5 {
            height: auto !important;
            min-height: 100vh !important;
            overflow-y: auto !important;
            padding-top: 20px;
        }

        /* Card registrasi */
        .login-content {
            background: #ffffff;
            padding: 35px 40px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07);
            margin-top: -45px;
            /* naik sedikit */
        }

        /* Logo */
        .login-logo img {
            width: 120px;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.1));
        }

        /* Judul Register */
        .register-title {
            text-align: center;
            font-size: 34px;
            font-weight: 700;
            margin-top: 15px;
            margin-bottom: 25px;
            color: #2c3e50;
            letter-spacing: 0.5px;
        }

        /* Input */
        .au-input--full {
            height: 45px;
            border-radius: 8px;
            border: 1px solid #dcdfe6;
            font-size: 15px;
            transition: 0.25s;
        }

        .au-input--full:focus {
            border-color: #4facfe;
            box-shadow: 0 0 6px rgba(79, 172, 254, 0.4);
        }

        /* Label */
        .form-group label {
            font-weight: 600;
            color: #333;
        }

        /* Tombol */
        #registerBtn {
            background: linear-gradient(135deg, #42e695, #3bb2b8);
            border-radius: 10px;
            padding: 12px;
            font-size: 17px;
            font-weight: 600;
            color: white;
            transition: 0.3s;
            border: none;
        }

        #registerBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        /* Link Login */
        .register-link {
            margin-top: 5px;
            text-align: center;
            font-size: 15px;
        }

        .register-link a {
            font-weight: 400;
            color: #3498db;
        }
    </style>

   


</head>

<body>
    <div class="page-wrapper">
        <div class="page-content--bge5">
            <div class="container">
                <div class="login-wrap">
                    <div class="login-content">
                        <div class="login-logo">
                            <a href="#">
                                <img src="images/icon/logo.png" alt="CoolAdmin">
                            </a>
                        </div>
                        <h3 class="register-title">Registrasi Akun</h3>
                        <div class="login-form">
                            <form id="registerForm" onsubmit="event.preventDefault(); registerUser();">
                                <div class="form-group">
                                    <label>Nama Lengkap</label>
                                    <input class="au-input au-input--full" type="text" id="namaLengkap"
                                        placeholder="Nama Lengkap" required>
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input class="au-input au-input--full" type="email" id="email" placeholder="Email"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label>NIK Karyawan</label>
                                    <input class="au-input au-input--full" type="text" id="nik"
                                        placeholder="NIK Karyawan" required>
                                </div>
                                <div class="form-group">
                                    <label>Username</label>
                                    <input class="au-input au-input--full" type="text" id="username"
                                        placeholder="Username" required>
                                </div>
                                <div class="form-group">
                                    <label>Email SALES</label>
                                    <input class="au-input au-input--full" type="email" id="emailSales"
                                        placeholder="Email SALES">
                                </div>

                                <div class="form-group">
                                    <label>Email ADH</label>
                                    <input class="au-input au-input--full" type="email" id="emailADH"
                                        placeholder="Email ADH">
                                </div>

                                <div class="form-group">
                                    <label>Email PENJUAL</label>
                                    <input class="au-input au-input--full" type="email" id="emailPenjual"
                                        placeholder="Email PENJUAL">
                                </div>

                                <div class="form-group">
                                    <label>Password</label>
                                    <input class="au-input au-input--full" type="password" id="password"
                                        placeholder="Password" required>
                                </div>
                                <div class="form-group">
                                    <label>Konfirmasi Password</label>
                                    <input class="au-input au-input--full" type="password" id="confirmPassword"
                                        placeholder="Konfirmasi Password" required>
                                </div>
                                <div class="form-group">
                                    <label>Cabang</label>
                                    <select class="au-input au-input--full" id="role" style="height: 40px;" required>
                                        <option value="">-- Pilih Cabang --</option>
                                        <option value="MAKASSAR">MAKASSAR</option>
                                        <option value="PALU">PALU</option>
                                        <option value="PONTIANAK">PONTIANAK</option>
                                        <option value="JAYAPURA">JAYAPURA</option>
                                        <option value="SORONG">SORONG</option>
                                        <option value="SAMARINDA">SAMARINDA</option>
                                        <option value="BULUNGAN">BULUNGAN</option>
                                        <option value="CILEGON">CILEGON</option>
                                        <option value="SAMARINDA">SAMARINDA</option>
                                        <option value="BALIKPAPAN">BALIKPAPAN</option>
                                        <option value="GORONTALO">GORONTALO</option>
                                    </select>
                                </div>

                                <div class="login-checkbox" style="margin-top: 5px;">
                                    <label>
                                        <input type="checkbox" id="agree" required> Setuju dengan syarat & kebijakan
                                    </label>
                                </div>

                                <button id="registerBtn" type="button" class="au-btn au-btn--block au-btn--green"
                                    onclick="registerUser()" style="margin-top: 3px;">
                                    Registrasi
                                </button>
                            </form>

                            <div class="register-link">
                                <p>Sudah punya akun? <a href="login.html">Login Here!</a></p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Bootstrap 5 JS-->
    <!-- Jquery JS-->
    <script src="js/vanilla-utils.js"></script>
    <!-- Bootstrap JS-->
    <script src="vendor/bootstrap-5.3.8.bundle.min.js"></script>
    <!-- Vendor JS       -->
    <script src="vendor/perfect-scrollbar/perfect-scrollbar-1.5.6.min.js"></script>
    <script src="vendor/chartjs/chart.umd.js-4.5.0.min.js"></script>




    <script>
        
        const scriptURL = "https://script.google.com/macros/s/AKfycbwyutAXOuSEfy1yItsWsWNCPBzOqyI-lktXPUdizX3H05Bj-syHkbrUIIbWWPGvXDBI8Q/exec";
        const registerBtn = document.getElementById("registerBtn");

        async function registerUser() {
            const namaLengkap = document.getElementById("namaLengkap").value.trim();
            const nik = document.getElementById("nik").value.trim();
            const username = document.getElementById("username").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value.trim();
            const confirmPassword = document.getElementById("confirmPassword").value.trim();
            const role = document.getElementById("role").value.trim();

            // üîπ Tambahan kolom email baru (boleh kosong)
            const emailSales = document.getElementById("emailSales")?.value.trim() || "";
            const emailADH = document.getElementById("emailADH")?.value.trim() || "";
            const emailPenjual = document.getElementById("emailPenjual")?.value.trim() || "";

            // üü° Validasi kolom wajib
            if (!namaLengkap || !nik || !username || !email || !password || !confirmPassword || !role) {
                showMessage("‚ö†Ô∏è Semua kolom wajib diisi!", "warning");
                return;
            }

            // üîµ Validasi email
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                showMessage("‚ö†Ô∏è Format email tidak valid!", "warning");
                return;
            }

            // üîí Pastikan password cocok
            if (password !== confirmPassword) {
                showMessage("‚ùå Password dan konfirmasi tidak sama!", "error");
                return;
            }

            // Tombol loading
            registerBtn.disabled = true;
            registerBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Sedang memproses...`;

            try {
                const response = await fetch(scriptURL, {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: new URLSearchParams({
                        action: "register",
                        namaLengkap,
                        nik,
                        username,
                        email,
                        password,
                        role,
                        emailSales,
                        emailADH,
                        emailPenjual,
                        loginEmail: localStorage.getItem("userEmail")
                    })
                });

                const result = await response.json();
                showMessage(result.message, result.success ? "success" : "error");

                if (result.success) {
                    document.getElementById("registerForm").reset();
                }

            } catch (error) {
                console.error("Error:", error);
                showMessage("‚ùå Gagal mengirim data. Periksa koneksi atau izin Apps Script.", "error");
            } finally {
                registerBtn.disabled = false;
                registerBtn.innerHTML = "Register";
            }
        }

        // üîî Fungsi notifikasi pojok bawah
        function showMessage(msg, type = "info") {
            const colors = {
                success: "#4CAF50",
                error: "#f44336",
                warning: "#ff9800",
                info: "#2196F3"
            };

            const div = document.createElement("div");
            div.textContent = msg;
            div.style.position = "fixed";
            div.style.bottom = "20px";
            div.style.right = "20px";
            div.style.background = colors[type];
            div.style.color = "white";
            div.style.padding = "10px 15px";
            div.style.borderRadius = "8px";
            div.style.boxShadow = "0 3px 8px rgba(0,0,0,0.3)";
            div.style.zIndex = "9999";
            div.style.transition = "opacity 0.3s ease";
            document.body.appendChild(div);

            setTimeout(() => {
                div.style.opacity = "0";
                setTimeout(() => div.remove(), 300);
            }, 2000);
        }
    </script>






    <!-- Main JS-->
    <script src="js/bootstrap5-init.js"></script>
    <script src="js/main-vanilla.js"></script>
    <script src="js/swiper-bundle-11.2.10.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/modern-plugins.js"></script>

</body>

</html>
<!-- end document-->